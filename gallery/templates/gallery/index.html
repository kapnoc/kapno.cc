{% extends 'base.html' %}
{% block 'contents' %}

{% load i18n %}
{% load thumbnail %}


<div class="row center-align hide-on-large-only">
    <div class="col s12">
        {% if parent %}
        <a class="btn green darken-2"
            href="{% url 'gallery:entry_pk' parent.pk %}">{% trans "Back: " %}{{ parent.name }}</a>
        {% elif not at_gallery_home %}
        <a class="btn green darken-2" href="{% url 'gallery:index'%}">{% trans "Back to Gallery Home" %}</a>
        {% endif %}
    </div>
</div>

<div class="row center-align">
    <div class="col l4 s6">
        {% if prev %}
        <a class="btn green darken-2 full-width"
            href="{% url 'gallery:entry_pk' prev.pk %}">{% trans "Previous: " %}{{ prev.name }}</a>
        {% endif %}
    </div>

    <div class="col l4 hide-on-med-and-down">
        {% if parent %}
        <a class="btn green darken-2 full-width"
            href="{% url 'gallery:entry_pk' parent.pk %}">{% trans "Back: " %}{{ parent.name }}</a>
        {% elif not at_gallery_home %}
        <a class="btn green darken-2 full-width" href="{% url 'gallery:index'%}">{% trans "Back to Gallery Home" %}</a>
        {% endif %}
    </div>

    <div class="col l4 s6">
        {% if next %}
        <a class="btn green darken-2 full-width"
            href="{% url 'gallery:entry_pk' next.pk %}">{% trans "Next: " %}{{ next.name }}</a>
        {% endif %}
    </div>
</div>


{% if elem %}
<div class="card">
    <div class="card-image">
        <a href="{{ elem.image.image.url }}">
            {% with img=elem.image.image|thumbnailer %}
            <img class="img-fluid card-img-top" src="{{ img.xlarge_4_3.url }}" alt="" />
            {% endwith %}
        </a>
    </div>

    <div class="card-content">
        <span class="card-title green-text text-darken-2">{{  elem.image.name_unique }}</span>
        <p>{{ elem.description }}</p>
    </div>
</div>
{% endif %}


<div class="row">
    {% for entry in entries %}
    <div class="col s6 m3">
        <a href="{% url 'gallery:entry_pk' entry.pk %}">
            <div class="card small">
                <div class="card-image">
                    {% with img=entry.image.image|thumbnailer %}
                    <img class="img-fluid card-img-top" src="{{ img.medium_4_3.url }}" alt="" />
                    {% endwith %}
                </div>

                <div class="card-content grey-text text-darken-4">
                    {% if entry.child_count == 0 %}
                    <span class="card-title green-text text-darken-2">{{ elem.image.name_unique }}</span>
                    {% else %}
                    <span class="card-title green-text text-darken-2">{{ entry.name }}</span>
                    {% endif %}
                    <p>{{ entry.description }}</p>
                </div>
            </div>
        </a>
    </div>
    {% endfor %}
</div>


{% endblock %}